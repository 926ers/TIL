# APACHE MPM

**다중 처리 모듈의 약자로, 클라이언트로부터 받은 요청을 어떤 방식으로 처리할 것인지에 대해 결정하는 모듈**

아파치 웹서버는 다양한 환경의 다양한 플래폼에서 동작할 수 있도록 강력하고 유연하게 설계되었다. 다른 플래폼과 다른 환경은 보통 다른 기능을 요구하며, 어떤 기능을 가장 효율적으로 구현하는 방법이 다를 수 있다. 아파치는 모듈화된 설계로 이런 다양한 환경에 항상 적응해왔다. 그래서 웹마스터는 컴파일시 혹은 실행시 어떤 모듈을 읽어들일지 선택하여 서버에 포함할 기능을 결정할 수 있다.

Apache 2.0은 이런 모듈화된 설계를 웹서버의 가장 기본적인 부분에까지 확장했다. 서버는 시스템의 네트웍 포트에 연결하고, 요청을 받아들이며, 받아들인 요청을 처리하기위해 자식들에게 분배하는 다중처리 모듈 (Multi-Processing Modules, MPMs)을 선택할 수 있다.

서버를 이 정도로 모듈화하면 두가지 중요한 장점이 있다:

- 아파치는 여러 다양한 운영체제를 더 깔끔하고 효율적으로 지원할 수 있다. 이 장점은 특화된 MPM을 구현한 다른 운영체제에도 적용된다.
- 서버는 특정 사이트의 요구조건에 더 특화될 수 있다. 예를 들어 높은 확장가능성(scalability)이 필요한 사이트는 `worker`와 같은 쓰레드 MPM을 사용하고, 안정성과 오래된 소프트웨어와의 호환성이 필요한 사이트는 `prefork`  을 사용할 수 있다. 추가로 다른 사용자아이디로 여러 호스트를 서비스하는 것과 같은 특별한 기능도 제공된다.

사용자가 보기에 MPM은 다른 아파치 모듈과 거의 비슷해 보인다. 주된 차이는 서버는 한번에 오직 한 MPM만을 사용해야 한다는 점이다. 사용가능한 MPM 목록은 [모듈 목록 페이지](https://httpd.apache.org/docs/2.4/ko/mod/)에 있다

설정법

[Apache MPM :: IT_STUDY](https://it-study.tistory.com/42)

`http.conf`파일에서 설정

스프링부트 내장 apache는  mpm지원X

```
server:
  port: 8081
  tomcat:
    threads:
      max: 200
      min-spare: 10
    connection-timeout: 20000
    max-http-header-size: 8KB
```

비슷한 설정할수있는거 같아요

 요청이 스레드나 프로세스보다 많아지면? -> 컨텍스트 스위칭 오버 헤드 증가 

# NODE.JS

**비동기 이벤트 주도 JS 런타임으로써 확장성 있는 네트워크 애플리케이션 제작할수 있도록설계**

- 싱글 스레드 -> 컨텍스트 스위칭 영향 감소

- 대기 시간 최솔화

- 하나의 흐름이 끝나기 전에는 다른 흐름 실행 X -> cpu를 많이 쓰면 안되요

# NGINX

[TIL/2024_06_28/kbs/프록시 리버스 로드밸런서.md at 9c3bdc8b11bc8fc2c298043301a4d01d601da6d9 · 926ers/TIL · GitHub](https://github.com/926ers/TIL/blob/9c3bdc8b11bc8fc2c298043301a4d01d601da6d9/2024_06_28/kbs/%ED%94%84%EB%A1%9D%EC%8B%9C%20%EB%A6%AC%EB%B2%84%EC%8A%A4%20%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9C.md)
